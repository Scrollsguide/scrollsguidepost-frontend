<div id="sidebar-wrapper" ng-class="{'active': sidebarActive}">
	<div class="sidebar-nav">
		<a id="sidebar-close" ng-click="sidebarActive=false" class="btn btn-default btn-lg pull-right">
			<i class="icon-remove"></i>
		</a>
		<div class="flyout-container">
			<h2>
				<img src="http://www.scrollsguide.com/app/super_low_res/{{activeCard.image}}.png"> {{activeCard.name}}
			</h2>
			<table class="table table-condensed">
				<thead>
					<tr>
						<th>
							Buy
						</th>
						<th>
							Sell
						</th>
						<th>Pop. (buy/sell)</th>
						<th>Last Seen</th>
					</tr>
				</thead>
				<tr>
					<td>{{prettyPrice(activeCard.price.buy)}}</td>
					<td>{{prettyPrice(activeCard.price.sell)}}</td>
					<td>{{activeCard.price.buyPop}} / {{activeCard.price.sellPop}}</td>
					<td>{{dateFormat(activeCard.price.lastseen)}}</td>
				</tr>
			</table>
			<hr>
			<div class="row-fluid">
				<div class="span4 card">
					<img ng-src="http://a.scrollsguide.com/image/screen?name={{cardImageName(activeCard.name)}}">
					<br>
					<strong class="rarity-label" ng-class="rarityClass(activeCard.rarity)">
						{{rarityToText(activeCard.rarity)}}
					</strong>
				</div>
				<div class="span8 offer-table">
					<table class="table table-condensed">
						<tr ng-repeat="offer in activeCard.price.details" ng-class="{'success': offer.type=='SELL'}">
							<td>{{prettyOfferType(offer.type)}}</td>
							<td><a href="http://www.scrollsguide.com/ranking/player/{{offer.user}}">{{offer.user}}</a></td>
							<td>{{offer.room}}</td>
							<td>{{prettyOfferPrice(offer.price)}}</td>
							<td>{{dateFormat(offer.time)}}</td>
						</tr>
					</table>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- /Side Menu -->
<div class="container">
	<div class="row-fluid">
	    <h1>Scrolls Prices</h1>
	</div>
	<div class="row-fluid price-container">
		<div class="row-fluid">
			<div class="span7">
				<form class="form-search">
				    <input type="text" class="search-query input-block-level" placeholder="Search" ng-model="searchTerm">
				</form>
			</div>
			<div class="span2">
				<button class="btn rarity-Common" ng-click="toggleRarity(0)" ng-class="{disabled: !rarityFilters[0]}">C</button>
				<button class="btn rarity-Uncommon" ng-click="toggleRarity(1)" ng-class="{disabled: !rarityFilters[1]}">U</button>
				<button class="btn rarity-Rare" ng-click="toggleRarity(2)" ng-class="{disabled: !rarityFilters[2]}">R</button>
			</div>
			<div class="span3">
				<button class="btn" ng-click="toggleFaction('order')" ng-class="{disabled: !factionFilters['order']}">
					<img src="/img/card-icons/order.png">
				</button>
				<button class="btn" ng-click="toggleFaction('growth')" ng-class="{disabled: !factionFilters['growth']}">
					<img src="/img/card-icons/growth.png">
				</button>
				<button class="btn" ng-click="toggleFaction('energy')" ng-class="{disabled: !factionFilters['energy']}">
					<img src="/img/card-icons/energy.png">
				</button>
				<button class="btn" ng-click="toggleFaction('decay')" ng-class="{disabled: !factionFilters['decay']}">
					<img src="/img/card-icons/decay.png">
				</button>
			</div>
		</div>
		<table class="table table-hover table-condensed table-bordered table-striped">
			<thead>
				<tr>
					<th>Image</th>
					<th width="30%">
						<a ng-click="changeSorting('name')">Scroll</a>
					</th>
					<th>
						Rarity
					</th>
					<th>
						<a ng-click="changeSorting('price.buy')">Buy</a>
					</th>
					<th>
						<a ng-click="changeSorting('price.sell')">Sell</a>
					</th>
					<th>Pop. (buy/sell)</th>
					<th>Last Seen</th>
				</tr>
			</thead>
			<tr ng-repeat="card in allCardData | orderBy:sort.column:sort.descending | filter:{name:searchTerm} | filter:cardRarity | filter:cardFaction" ng-click="details(card)">
				<td><img src="http://www.scrollsguide.com/app/super_low_res/{{card.image}}.png"></td>
				<td width="30%">{{card.name}}</td>
				<td ng-class="rarityClass(card.rarity)">{{rarityToText(card.rarity)}}</td>
				<td>{{prettyPrice(card.price.buy)}}</td>
				<td>{{prettyPrice(card.price.sell)}}</td>
				<td>{{card.price.buyPop}} / {{card.price.sellPop}}</td>
				<td>{{dateFormat(card.price.lastseen)}}</td>
			</tr>
		</table>
	</div>
</div>